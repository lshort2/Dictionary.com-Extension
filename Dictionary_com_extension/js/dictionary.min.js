var pageInfo={"title":document.title,"url":window.location.href,"selectionText":window.getSelection().toString()};chrome.extension.sendRequest(pageInfo);var ignoreDomain={'dictionary.reference.com':'Dictionary','dictionary.com':'Dictionary','thesaurus.com':'thesaurus','reference.com':'reference'};var pageInfo={"title":document.title,"url":window.location.href,"selectionText":window.getSelection().toString()};chrome.extension.sendRequest(pageInfo);var ignoreDomain={'dictionary.reference.com':'Dictionary','dictionary.com':'Dictionary','thesaurus.com':'thesaurus','reference.com':'reference'};var timer=0;var timer1=0;var speaker=chrome.extension.getURL("images/Audioicon.png");var loading=chrome.extension.getURL("images/ajax-loader.gif");var dic_logo=chrome.extension.getURL("images/pop-up_logo.png");var dic_logo_icon=chrome.extension.getURL("dictionary_Icon_16.png");var dic_close_btn=chrome.extension.getURL("images/closeIcon.png");var dic_close_green_btn=chrome.extension.getURL("images/DismissIconSEOEntry.gif");var blank=chrome.extension.getURL("images/blank.gif");var dic_more=chrome.extension.getURL("images/more.png");var googleRegExpURL=new RegExp("^http(?:|s)://(?:www|encrypted).google.(?:com|ca|co.uk|com.au|co.in|co.id|com.ph)/(?:(?:search\\?|webhp\\?|#)(?:.*&)?q=([^&=]*)(.*)$)?");var dicMatch=googleRegExpURL.exec(window.location.href);var dicQueryTerms='';var dicPaging='';var showDic=false;if(dicMatch){dicQueryTerms=decodeURIComponent(dicMatch[1]).replace(/\+/g," ");if(dicQueryTerms!='undefined'){chrome.extension.sendRequest({action:'setSearch',lastSearch:dicQueryTerms},function(response){})}else{chrome.extension.sendRequest({action:'getSearch'},function(response){dicQueryTerms=response})}}var defaultOptions={};chrome.extension.sendRequest({action:'getLocalStorage'},function(response){defaultOptions=response});var bubbleDOM=null;$(document).ready(function(){if($("div#dic_bubble").length==0){var firstChild=document.body.firstElementChild;bubbleDOM=$("<div id=dic_bubble class=selection_bubble"+" style=z-index:9999; fetching='false'></div>");bubbleDOM.insertBefore(firstChild)}$(document).dblclick(function(e){var target=(e&&e.target)||(event&&event.srcElement);if(isValidSelection(target)){preSelectEventBind(e,'dblclick')}});$(document).mouseup(function(e){var target=(e&&e.target)||(event&&event.srcElement);if(!isInsideBubble(target)){preSelectEventBind(e,'mouseup')}});$(document).click(function(e){var target=(e&&e.target)||(event&&event.srcElement);var selection=getTrimmedDicSelection();if(!isInsideBubble(target)&&selection.length==0){$("div#dic_bubble").css('visibility','hidden')}})});function isInsideBubble(currentTarget){var valid=false;var current_element=currentTarget;var dic_bubble=document.getElementById('dic_bubble');while(current_element&&current_element!=document.body){if(current_element==dic_bubble){valid=true;break}current_element=current_element.parentNode}return valid}function isValidSelection(currentTarget){var valid=true;var current_element=currentTarget;var dic_bubble=document.getElementById('dic_bubble');while(current_element&&current_element!=document.body){if(current_element==dic_bubble){valid=false;break}current_element=current_element.parentNode}var tag=currentTarget.tagName.toLowerCase();if(tag=='input'||tag=='textarea'||tag=='img'){valid=false}return valid}function preSelectEventBind(e,selectedEvent){chrome.extension.sendRequest({action:'getLocalStorage'},function(response){defaultOptions=response;if((defaultOptions.use_popupdbclick&&defaultOptions.use_popupdbclick.triggerValue)&&selectedEvent=='dblclick'){createhtml(e,false)}if((defaultOptions.use_popupselect&&defaultOptions.use_popupselect.triggerValue)&&selectedEvent=='mouseup'){createhtml(e,false)}})}function createhtml(e,refresh){if(checkDomain()){return}bubbleDOM=$("div#dic_bubble");chrome.extension.sendRequest({action:'getLocalStorage'},function(response){defaultOptions=response;var showDefintion=false;if(defaultOptions.use_popupselect.triggerValue&&e.type=='mouseup'){showDefintion=checkTrigger(defaultOptions.use_popupselect.triggerKey,e)}if(defaultOptions.use_popupdbclick.triggerValue&&e.type=='dblclick'){showDefintion=checkTrigger(defaultOptions.use_popupdbclick.triggerKey,e)}if(!showDefintion){return}var selection=getTrimmedDicSelection();selection=selection.replace(/\b[-.,;()&$#!\[\]{}]+\B|\B[-.,;()&$#!\[\]{}]+\b/g,"");var pageX=e.pageX;var pageY=e.pageY;var target=(e&&e.target)||(event&&event.srcElement);if(selection.length>0){if($("div#dic_bubble").attr('fetching')=='true'){return}$("div#dic_bubble").attr('fetching','true');var dic_arrow_css="dic-arrow-"+defaultOptions.use_window;var dic_bubble_arrow_css="dic-bubble-arrow-"+defaultOptions.use_window;var dic_use_window=defaultOptions.use_window;var wleft=pageX;var wtop=pageY;var arrowColor=null;var belowPageHeight=window.innerHeight+window.scrollY;var abovePageHeight=window.scrollY;if(pageY>=belowPageHeight-150&&dic_use_window=="below"){dic_use_window="above";dic_arrow_css="dic-arrow-above";dic_bubble_arrow_css="dic-bubble-arrow-above"}else if(pageY<=abovePageHeight+150&&dic_use_window=="above"){dic_use_window="below";dic_arrow_css="dic-arrow-below";dic_bubble_arrow_css="dic-bubble-arrow-below"}if(dic_use_window=="below"){if(pageX>76){wleft=pageX-76}wtop=pageY+30;arrowColor="border-bottom:20px solid "+defaultOptions.use_color_style.bubbleColor}else if(dic_use_window=="above"){if(pageX>75){wleft=pageX-75}if(pageY>120){wtop=pageY-120}arrowColor="border-top:20px solid "+defaultOptions.use_color_style.bubbleColor}var loader=' <img src="'+loading+'" style="padding:10px 0 15px 190px;">';if(!refresh){$("div#dic_bubble").css({'top':wtop+'px','left':wleft+'px','backgroundColor':defaultOptions.use_color_style.bubbleColor,'color':defaultOptions.use_color_style.fontColor,'fontSize':defaultOptions.use_color_style.fontSize,'fontFamily':defaultOptions.use_color_style.fontType,'visibility':'visible'})}else{$("div#dic_bubble").css('visibility','visible')}$("div#dic_bubble").html(loader);var synonyms='';var displayWord=selection;var apostrophy=selection.indexOf("'");if(apostrophy!=-1){selection=selection.substring(0,apostrophy)}if(defaultOptions.use_definition.synonyms){var dicRestAPISynonymsURL="http://restapi.dictionary.com/v2/word.json/"+selection+"/synonyms?api_key=sWq3tLz8ifndaTK&platform=Chrome&app_id=chromeExtension_1.1";$.ajax({type:"GET",url:dicRestAPISynonymsURL,dataType:"json",success:function(synonymsJSON){if(synonymsJSON.synonyms.length>0){for(var i=0;i<synonymsJSON.synonyms.length;i++){if(i<10){var linkedUrl="http://www.dictionary.com/browse/"+synonymsJSON.synonyms[i];synonyms=synonyms+'<a href="'+linkedUrl+'">'+synonymsJSON.synonyms[i]+'</a>, '}}var lastIndex=synonyms.lastIndexOf(",");synonyms=synonyms.substring(0,lastIndex)}},error:function(xhr,ajaxOptions,thrownError){console.log("unable to find out this word.")}})}var dicRestAPIURL="http://restapi.dictionary.com/v2/word.json/"+selection+"/complete?api_key=sWq3tLz8ifndaTK&platform=Chrome&app_id=chromeExtension_1.1&clickSource=Popup";$.ajax({type:"GET",url:dicRestAPIURL,dataType:"json",success:function(response){if(response.entries.length>0){var nounHtml=$('<div class="selection_bubble_content">'+'<div class="selection_bubble_word" id="selection_bubble_word">'+'<img src="'+dic_close_btn+'" id="selection_bubble_close" align="right"/>'+'</div>'+'<div id="dic_bubble_difinition">'+'		<i class="selection_bubble_title">adjective</i>'+'		<div id="dic_bubble_dif" class="dic_dif"></div>'+'</div>'+' <div id="dic_bubble_synonyms">'+'</div>'+'<div id="selection_bubble_more_action">'+'		<span>'+'			<a href="http://app.dictionary.com/click/hbnm17?clkdest=http://dictionary.com/browse/'+selection+'" target="_blank">'+'				<img  src="'+dic_more+'"  alt="Dictionary More"/>'+'			</a>'+'		</span>'+'		<a href="http://app.dictionary.com/click/rovvlr?clkdest=http://dictionary.com/" target="_blank">'+'			<img style="position: relative;bottom: 5px;" src="'+dic_logo+'" align="right" alt="Dictionary.com">'+'		</a>'+' </div>'+'</div>'+'<div class="'+dic_arrow_css+'"></div>'+'<div class="'+dic_bubble_arrow_css+'" style="'+arrowColor+'"></div>');$("div#dic_bubble").html(nounHtml);$("div#dic_bubble").attr('fetching',false);var adjectiveCount=1;var count=0;var dataEntries=response.entries;var selectionFound=false;var foundDefintion=false;var dataEntry=null;for(var i=0;i<dataEntries.length;i++){if(dataEntries[i].entry==selection){dataEntry=dataEntries[i];break}}if(dataEntry==null){dataEntry=dataEntries[0]}if(dataEntry!=null){if(!selectionFound){selectionFound=true}$('<span style="font-weight:bold;padding-right:10px;"></span>').html(displayWord).appendTo('#selection_bubble_word');if(window.location.protocol!="https:"){if(dataEntry.audio_file!=null){var audiovar="http://sp.dictionary.com/dictstatic/dictionary/audio/luna/"+dataEntry.audio_file+".mp3";var speakerDom='<img style="position: relative;top: 4px;display:inline;cursor:pointer;" src="'+speaker+'" id="playSound">';$('<span style="padding-right:5px;font-size:12px;"></span>').html(speakerDom).appendTo('#selection_bubble_word');$('#playSound').click(function(){var embedDom='<embed src="'+audiovar+'" hidden=true autostart=true loop=false>';$('#soundBox').html(embedDom)})}}if(dataEntry.pronunciation_spell!=null){var pron="[<span style='padding-right:2px;'> "+dataEntry.pronunciation_spell+"</span>]";$('<span class="selection_bubble_align_with_spearker"></span>').html(pron).appendTo('#selection_bubble_word')}$('<span id="soundBox">&nbsp;</span>').appendTo('#selection_bubble_word');var defintionLength=0;var defintionsDisplay=null;var definitionType=null;for(var type in dataEntry.definitions){if(!foundDefintion){if(dataEntry.definitions[type].length>defintionLength){definitionType=type;defintionsDisplay=dataEntry.definitions[definitionType];defintionLength=dataEntry.definitions[definitionType].length}}if(defintionLength>=defaultOptions.use_definition.num){foundDefintion=true;break}}$('i.selection_bubble_title').html(definitionType);if(defintionLength!=0){for(var j=0;j<defintionLength;j++){if(count!=defaultOptions.use_definition.num){var definitionContent=null;if(defintionsDisplay[j].definition){definitionContent="<div class='itemCount'>"+adjectiveCount+".</div><div class='itemData'> "+defintionsDisplay[j].definition.content+"</div>";$('<div class=item ></div>').html(definitionContent).appendTo('#dic_bubble_dif');count=count+1;adjectiveCount=adjectiveCount+1}else if(defintionsDisplay[j].definitions){for(var k=0;k<defintionsDisplay[j].definitions.length;k++){if(count!=defaultOptions.use_definition.num){definitionContent="<div class='itemCount'>"+adjectiveCount+".</div><div class='itemData'> "+defintionsDisplay[j].definitions[k].content+"</div>";$('<div class=item ></div>').html(definitionContent).appendTo('#dic_bubble_dif');count=count+1;adjectiveCount=adjectiveCount+1}}}}}if(defaultOptions.use_definition.synonyms){if(synonyms.length>10){var dicSynonyms=' <div class="selection_bubble_synonyms">synonyms</div>'+' <div id="selection_bubble_defintion"></div>';$('#dic_bubble_synonyms').html(dicSynonyms);$('<span></span>').html(synonyms).appendTo('#selection_bubble_defintion');$('div#selection_bubble_defintion span a').click(function(){var href=$(this).attr('href');chrome.extension.sendRequest({action:'redirectUrl',href:href},function(response){});return false})}}if(!refresh&&(dic_use_window=="above"&&count!=0)){wtop=pageY-($("div#dic_bubble")[0].clientHeight+30);$("div#dic_bubble").css({'top':wtop+'px','left':wleft+'px','visibility':'visible'})}if(count==0){var mainhref='<a style="color:#12C;font-size:12px;" href=http://www.reference.com/browse/'+selection+'>results for '+selection+'</a>';var suggestion="<div style='padding:10px;'>No dictionary results were found. Please try another search.</div><div style='clear:both;padding:10px;' class='seeDefinition'>See "+mainhref+" on Reference.com</div>";$('#dic_bubble_difinition').html(suggestion)}}else if(!selectionFound){var mainhref='<a style="color:#12C;font-size:12px;" href=http://www.reference.com/browse/'+selection+'>results for '+selection+'</a>';var suggestion="<div style='padding:10px;'>No dictionary results were found. Please try another search.</div><div style='clear:both;padding:10px;' class='seeDefinition'>See "+mainhref+" on Reference.com</div>";$('#dic_bubble_difinition').html(suggestion)}}}else{var nounHtml=$('<div class="selection_bubble_content">'+'<div class="selection_bubble_word" id="selection_bubble_word">'+'<img src="'+dic_close_btn+'" id="selection_bubble_close" align="right"/>'+'</div>'+'<div id="dic_bubble_difinition">'+'</div>'+'<div id="selection_bubble_more_action">'+'     <span>&nbsp;</span>'+'		<img  src="'+dic_logo+'" align="right" alt="Dictionary.com" style="position: relative;bottom: 5px;">'+' </div>'+'</div>'+'<div class="'+dic_arrow_css+'"></div>'+'<div class="'+dic_bubble_arrow_css+'" style="'+arrowColor+'"></div>');$("div#dic_bubble").html(nounHtml);$("div#dic_bubble").attr('fetching',false);var mainhref='<a style="color:#12C;font-size:12px;" href=http://www.reference.com/browse/'+selection+'>results for '+selection+'</a>';var suggestion="<div style='padding:10px;'>No dictionary results were found. Please try another search.</div><div style='clear:both;padding:10px;' class='seeDefinition'>See "+mainhref+" on Reference.com</div>";$('#dic_bubble_difinition').html(suggestion)}$('#selection_bubble_close').click(function(){$("div#dic_bubble").css('visibility','hidden');return false});$('.itemData a').hover(function(){var popHref=$(this).attr("href");var checkSpecialChar=popHref.indexOf("@");if(checkSpecialChar!=-1){var popText=$(this).text();popHref=$(this).attr("href","http://www.dictionary.com/browse/"+popText)}return false});$('.itemData a').click(function(){var popHref=$(this).attr("href");var checkSpecialChar=popHref.indexOf("@");if(checkSpecialChar!=-1){popHref=$(this).text()}chrome.extension.sendRequest({action:'redirectUrl',href:popHref},function(response){});return false});$('.seeDefinition a').click(function(){var popHref=$(this).attr("href");chrome.extension.sendRequest({action:'getReference',href:popHref},function(response){});return false});$('div##dic_bubble_dif div.item div.itemData').dblclick(function(e){createhtml(e,true)})},error:function(xhr,ajaxOptions,thrownError){var nounHtml=$('<div class="selection_bubble_content">'+'<div class="selection_bubble_word" id="selection_bubble_word">'+'		<img src="'+dic_close_btn+'" id="selection_bubble_close" align="right"/>'+'</div>'+'<div id="dic_bubble_difinition">'+'</div>'+'<div id="selection_bubble_more_action">'+'     <span>&nbsp;</span>'+'		<img  src="'+dic_logo+'" align="right" alt="Dictionary.com" style="position: relative;bottom: 5px;">'+' </div>'+'</div>'+'<div class="'+dic_arrow_css+'"></div>'+'<div class="'+dic_bubble_arrow_css+'" style="'+arrowColor+'"></div>');$("div#dic_bubble").html(nounHtml);$("div#dic_bubble").attr('fetching',false);$('#dic_bubble_difinition').html('<div style="padding:10px;">No dictionary results were found. Please try another search.</div>');$('#selection_bubble_close').click(function(){$("div#dic_bubble").css('visibility','hidden');return false})}})}})}function getDefinitionSearch(defineWord,domain){chrome.extension.sendRequest({action:'getLocalStorage'},function(response){defaultOptions=response;if(!defaultOptions.use_search_result){return}if(defineWord.length>0){var remPuncation=defineWord.replace(/\b[-.,;()&$#!\[\]{}]+\B|\B[-.,;()&$#!\[\]{}]+\b/g,"");defineWord=remPuncation;var removeWords=['a','an','and','another','antonym','antonyms','are','com','define','definition','definitions','dictionary','do','does','english','for','free','google','how','in','is','language','mean','meaning','means','of','online','pronounce','pronounciation','search','google','facebook','starting','starts','synonym','synonyms','term','that','the','thesaurus','.com','weather','things','to','what','with','word','words','www','you'];for(var rw=0;rw<removeWords.length;rw++){if(removeWords[rw].toLowerCase()==defineWord){return}}var word=defineWord.indexOf(" ");if(word!=-1){defineWord=defineWord.replace(/definitions of/i,"").replace(/definition of/i,"").replace(/definitions/i,"").replace(/define/i,"").replace(/definition/i,"");defineWord=defineWord.replace(/meaning of/i,"").replace(/meaning/i,"").replace(/means/i,"");defineWord=defineWord.replace(/what is/i,"")}defineWord=trim(defineWord);var displayWord=defineWord;var splidWord=defineWord.split(" ");if(splidWord.length>3){return}var apostrophy=defineWord.indexOf("'");if(apostrophy!=-1){defineWord=defineWord.substring(0,apostrophy)}defineWord=trim(defineWord);var dicRestAPIURL="http://restapi.dictionary.com/v2/word.json/"+defineWord+"/complete?api_key=sWq3tLz8ifndaTK&filter=top100k&platform=Chrome&app_id=chromeExtension_1.1&clickSource=SERP definition";$.ajax({type:"GET",url:dicRestAPIURL,dataType:"json",success:function(response){if(response.entries.length>0){if($('#dictionarySearch')){$('#dictionarySearch').remove()}var nounHtml=$('<div class="dic_definitions_content">'+' <div style="padding:5px 0 0;" id="selection_popup_word"></div>'+' <div id="dic_difinition"></div>'+' <div id="dic_more_option">'+'		<span style=font-size:11px;">'+'			<a style="text-decoration:underline !important;" target="_blank" href=http://app.dictionary.com/click/i172vc?clkdest=http://dictionary.com/browse/'+defineWord+'><b>See more definitions</b></a>'+'		</span>'+'		<span style=font-size:11px;padding-left:13px;">'+'			<a style="color:#EC8A00 !important;text-decoration:underline !important;" target="_blank" href=http://app.dictionary.com/click/nc7l4u?clkdest=http://thesaurus.com/browse/'+defineWord+'><b>See synonyms at Thesaurus.com</b></a>'+'		</span>'+' </div>'+'</div>');var dic_logo_img='<a style="text-decoration:none !important;" target="_blank" href="http://app.dictionary.com/click/thrmoy?clkdest=http://dictionary.com/" ><img src="'+dic_logo_icon+'" alt = "dictionary.com" style="float: left;"></a>';var dicHeading='<a style="text-decoration:none !important;" target="_blank" href="http://app.dictionary.com/click/hhsk6b?clkdest=http://dictionary.com/" ><b>Definition of '+displayWord+'</b> at Dictionary.com</a>';var dicUrl='<div><a style="text-decoration:none!important;color:#009933!important;font-size:12px;" href=http://app.dictionary.com/click/bq4gtf?clkdest=http://dictionary.com/browse/'+defineWord+' >www.dictionary.com/'+defineWord+'</a></div>';var dicCloseBtn='<div class = "dictionary_result_close">Dictionary.com Result<img src="'+dic_close_green_btn+'" alt="Dictionary.com Result" id="selection_search_close" align="right"/></div>';var searchHeader=$('<span></span>').html(dicHeading).css({color:'#1122CC',paddingLeft:'7px',position:'relative',bottom:'2px'});var $related_search_results=$('<div id="dictionarySearch"'+' style="font-size:15px;margin:15px 0;"></div>').append(dic_logo_img).append(searchHeader).append(dicCloseBtn).append(dicUrl).append(nounHtml);var gtimer=0;if(domain=='google'){var try_insert_google=function(){if($("#res ol li").length>0){if($('#dictionarySearch').length==0){var google_results=$("#res ol li");$(google_results[0]).before($related_search_results)}else{clearTimeout(gtimer)}}};try_insert_google();var gtimer=setInterval(try_insert_google,100)}else if(domain=='bing'){$related_search_results.prependTo($("#results_container"))}else if(domain=='yahoo'){var yahoo_results=$("#web ol li");$(yahoo_results[0]).before($related_search_results)}else if(domain=='ask'){var ask_results=$("#teoma-results div div");$(ask_results[0]).before($related_search_results)}else if(domain=='aol'){var aol_results=$("div#w div#c div div");$(aol_results[0]).before($related_search_results)}else if(domain=='duckduckgo'){var duckduckgo_results=$("div#r12 div");$(duckduckgo_results[0]).before($related_search_results)}else if(domain=='surfcanyon'){var surfcanyon_results=$("#resultTable tbody tr td div");$(surfcanyon_results[0]).before($related_search_results)}var count=0;var itemCunt=1;var noItemCunt=0;var dataEntries=response.entries;var selectionFound=false;var foundDefintion=false;var dataEntry=null;for(var i=0;i<dataEntries.length;i++){if(dataEntries[i].entry==defineWord){dataEntry=dataEntries[i];selectionFound=true}if(selectionFound){break}}if(dataEntry==null){dataEntry=dataEntries[0]}if(dataEntry!=null){var displayName=dataEntry.entry;$('<span style="font-weight:bold;padding-right:10px;"></span>').html(displayWord).appendTo('#selection_popup_word');if(window.location.protocol!="https:"){if(dataEntry.pronunciation_spell!=null){var audiovar="http://sp.dictionary.com/dictstatic/dictionary/audio/luna/"+dataEntry.audio_file+".mp3";var speakerDom='<img style="position: relative;top: 4px;display:inline;cursor:pointer;" src="'+speaker+'" id="playAudioSound">';$('<span style="padding-right:28px;font-size:12px;"></span>').html(speakerDom).appendTo('#selection_popup_word');$('#playAudioSound').click(function(){var embedDom='<embed src="'+audiovar+'" hidden=true autostart=true loop=false>';$('#audioSoundBox').html(embedDom)})}}else{var speakerDom='<img width="18px" style="position: relative;top: 4px;display:inline;" src="'+blank+'" >';$('<span style="padding-right:28px;font-size:12px;"></span>').html(speakerDom).appendTo('#selection_popup_word')}if(dataEntry.pronunciation_spell!=null){var pron="[<span style='padding-right:2px;'> "+dataEntry.pronunciation_spell+"</span>]";$('<span style="font-size:12px;"></span>').html(pron).appendTo('#selection_popup_word')}$('<span id="audioSoundBox">&nbsp;</span>').appendTo('#selection_popup_word');for(var type in dataEntry.definitions){itemCunt=1;noItemCunt=noItemCunt+1;definitionType=type;defintionsDisplay=dataEntry.definitions[definitionType];defintionLength=dataEntry.definitions[definitionType].length;if(defintionLength!=0){var contentDisplay='';for(var j=0;j<defintionLength;j++){if(count!=1){var definitionContent=null;if(defintionsDisplay[j].definition){definitionContent="<div>"+defintionsDisplay[j].definition.content+"</div>";if(contentDisplay==''){contentDisplay=definitionContent}else{contentDisplay=contentDisplay+definitionContent}count=count+1;itemCunt=itemCunt+1}else if(defintionsDisplay[j].definitions){for(var k=0;k<defintionsDisplay[j].definitions.length;k++){if(count!=1){definitionContent="<div>"+defintionsDisplay[j].definitions[k].content+"</div>";if(contentDisplay==''){contentDisplay=definitionContent}else{contentDisplay=contentDisplay+definitionContent}count=count+1;itemCunt=itemCunt+1}}}}if(count==1){count=0;break}}if(definitionType=='verb (used with object)'){definitionType='verb'}if(definitionType.indexOf("adjective")!=-1){definitionType='adjective'}if(definitionType=='verb (used without object)'){continue}var contentDiv='<div class="selection_popup_title" style="font-size:12px;float:left;"><i><b>'+definitionType+'</b></i></div>'+' <div id="searchItem">'+contentDisplay+' </div>';$('#dic_difinition').append(contentDiv)}}}}$('#searchItem a').click(function(){var popHref=$(this).attr("href");chrome.extension.sendRequest({action:'redirectUrl',href:popHref},function(response){});return false});$('.dictionary_result_close').click(function(){$('#dictionarySearch').hide();return false})},error:function(xhr,ajaxOptions,thrownError){console.log("unable to find out this word.")}})}})}function getTrimmedDicSelection(){var selection=String(window.getSelection());return selection.replace(/^\s+|\s+$/g,'')}function trim(word){return word.replace(/^\s+|\s+$/g,'')}function checkTrigger(keyTrigger,e){switch(keyTrigger){case'none':return true;case'ctrl':return e.ctrlKey;case'alt':return e.altKey;case'shift':return e.shiftKey;default:return false}}function getVendor(){var vendor=document.domain;var index=vendor.indexOf('www');if(index!=-1){vendor=vendor.replace('www.','')}return vendors[vendor]}function checkDomain(){var siteDomain=document.domain;var index=siteDomain.indexOf('www');if(index!=-1){siteDomain=siteDomain.replace('www.','')}return ignoreDomain[trim(siteDomain)]}